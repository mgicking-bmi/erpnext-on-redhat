# Connecting ERPNext to remote MariaDB

### Prerequisite
You will need the Server admin to have opened host firewall port 3306 (same as mysql) on the DB Server VM, to allow connections from App Server(s).

### Accept Remote Connections

##### Edit MariaDB Config
`sudo nano /etc/mysql/mariadb.conf.d/50-server.cnf`
_Change bind address from `127.0.0.1` to `0.0.0.0`_

##### Create an App User and Grant Privileges
###### Connect to SQL Server and run the following commands
`CREATE USER 'root'@'[APP_IP_ADDRESS]' IDENTIFIED BY '[AUTOGENERATED_PASSWORD]';`
`GRANT ALL PRIVILEGES ON *.* TO 'root'@'[APP_IP_ADDRESS]' IDENTIFIED BY '[AUTOGENERATED_PASSWORD]' WITH GRANT OPTION;`
`FLUSH PRIVILEGES; EXIT;`

###### Restart MariaDB Server (via mysql syntax)
`sudo service mysql restart`

_NOTE: Check that it's working with the following command:_
`mysql -u root -h [DB_IP_ADDRESS] -p`

### Configure App Server
`bench set-mariadb-host [DB_IP_ADDRESS]`

##### Restart Services
###### For Production environment
`supervisorctl restart all`

###### For Development environment
`bench restart`
